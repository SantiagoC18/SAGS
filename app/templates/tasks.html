<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/static/img/sirs.jpg">
    <script src="https://kit.fontawesome.com/25eed41d7b.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/static/css/estilos.css">
    <link rel="stylesheet" href="/static/css/tareas.css">
    <title>Tareas</title>
</head>

<body>

    <header>
        <a href="{{ url_for('main.index') }}" class="logo"><img src="/static/img/sirs.jpg" width="60px"></a>

        <ul class="navbar">
            <li><a href="{{ url_for('main.index') }}">Home</a></li>
            <li><a href="{{ url_for('main.sobre_nosotros') }}">Sobre Nosotros</a></li>
            <li><a href="{{ url_for('main.modulos') }}" class="active">Gestion de Proyectos</a></li>
            <li><a href="{{ url_for('api.list_pqrs') }}">PQRS</a></li>
            <li><a href="{{ url_for('profile.perfil') }}">Perfil</a></li>
        </ul>

        <div class="main">
            <a href="{{ url_for('auth.logout') }}" class="user"><i class="fa-solid fa-user"></i>{% if log %} {{log}}
                Sesion
                {% endif %}
            </a>
            <div class="bx bx-menu" id="menu-icon"><i class="fa-solid fa-bars"></i></div>
        </div>
    </header>

    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.3.8/build/spline-viewer.js"></script>
    <spline-viewer url="https://prod.spline.design/oP1Rx8Le7K9noHAa/scene.splinecode"></spline-viewer>


    <!-- Contenido principal -->
    <section class="container_tasks">

        <button class="button" id="btn-abrir-popup1">
            <svg class="button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            Nueva Tarea
        </button>

        <br>
        <br>

        <table id="myTable" class=" bg-[#000]" style="max-width:4vw; overflow: auto;">
            <thead>
                <tr>
                    <th>#</th>
                    <th>TAREA</th>
                    <th>ESTADO</th>
                    <th>PRIORIDAD</th>
                    <th>ASIGNADO A</th>
                    <th>FECHA LIMITE</th>
                    <th>ACCIONES</th>
                </tr>
            </thead>
            <tbody>

                {% for data in data %}

                <tr class="info">
                    <td>{{ data['id_tar'] }}</td>
                    <td>{{ data['nombre_tarea'] }}</td>
                    <td>
                        <span class="insignia prioridad estado-{{ data['estado'] }}">
                            {{ data['estado'] }}
                        </span>
                    </td>
                    <td>
                        <span class="insignia prioridad prioridad-{{ data['prioridad'] }}">
                            {{ data['prioridad'] }}
                        </span>
                    </td>
                    <td>{{ data['nombre_usuario'] }} {{ data['apellido_usuario'] }}</td>
                    <td>{{ data['fechaLimite'] }}</td>
                    <td>
                        <a href="#"><i class="fa-solid fa-circle-info"></i></a>
                        <a href="#"><i class="fa-solid fa-trash"></i></a>
                    </td>
                </tr>

                {% endfor %}
            </tbody>
        </table>

        <!--ventana emergente2-->

        <div class="overlay" id="overlay1">
            <div class="popup" id="popup1">
                <div class="modal-header">
                    <h2 class="modal-title">Nueva Tarea</h2>
                </div>
                <div class="modal-body">
                    <form id="task-form">
                        <div class="form-group">
                            <label for="task-title" class="form-label">Título de la tarea</label>
                            <input type="text" class="form-control" id="task-title"
                                placeholder="Ej: Implementar autenticación de usuarios">
                        </div>

                        <div class="form-group">
                            <label for="task-description" class="form-label">Descripción</label>
                            <textarea class="form-control" id="task-description"
                                placeholder="Describe los detalles de la tarea"></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="sprint" class="form-label">Sprint</label>
                                    <select class="form-control" id="sprint">
                                        <option value="">Seleccionar Sprint</option>
                                        <option value="sprint-1">Sprint 1: Diseño de UI</option>
                                        <option value="sprint-2">Sprint 2: Desarrollo Frontend</option>
                                        <option value="sprint-3">Sprint 3: Integración Backend</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="due-date" class="form-label">Fecha límite</label>
                                    <input type="date" class="form-control" id="due-date">
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="status" class="form-label">Estado</label>
                                    <select class="form-control" id="status">
                                        <option value="todo">Por hacer</option>
                                        <option value="in-progress">En progreso</option>
                                        <option value="review">En revisión</option>
                                        <option value="done">Completado</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="priority" class="form-label">Prioridad</label>
                                    <select class="form-control" id="priority">
                                        <option value="low">Baja</option>
                                        <option value="medium">Media</option>
                                        <option value="high">Alta</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="assignee" class="form-label">Asignado a</label>
                            <select class="form-control" id="assignee">
                                <option value="">Sin asignar</option>
                                <option value="santiago">
                                    Santiago
                                </option>
                                <option value="maria-jose">
                                    María José
                                </option>
                                <option value="shiuu">
                                    Shiuu
                                </option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Etiquetas</label>
                            <div class="tags">
                                <input type="checkbox" id="tag-1" class="tag-checkbox">
                                <label for="tag-1" class="tag-label">Frontend</label>

                                <input type="checkbox" id="tag-2" class="tag-checkbox">
                                <label for="tag-2" class="tag-label">Backend</label>

                                <input type="checkbox" id="tag-3" class="tag-checkbox">
                                <label for="tag-3" class="tag-label">UI/UX</label>

                                <input type="checkbox" id="tag-4" class="tag-checkbox">
                                <label for="tag-4" class="tag-label">Bug</label>

                                <input type="checkbox" id="tag-5" class="tag-checkbox">
                                <label for="tag-5" class="tag-label">Mejora</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="estimated-hours" class="form-label">Horas estimadas</label>
                            <input type="number" class="form-control" id="estimated-hours" min="0" step="0.5"
                                placeholder="Ej: 4.5">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="btn-cerrar-popup1">Cancelar</button>
                    <button type="submit" form="task-form" class="btn btn-primary">Crear Tarea</button>
                </div>
            </div>
        </div>



        <!--fin ventana emergente2-->

        <script src="/static/js/popup.js"></script>

        <!--scripts para dataTable-->

        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
        <script src="https://cdn.tailwindcss.com/"></script>
        <script src="https://cdn.datatables.net/2.1.5/js/dataTables.js"></script>
        <script src="https://cdn.datatables.net/2.1.5/js/dataTables.tailwindcss.js"></script>
        <script src="https://cdn.tailwindcss.com/"></script>
        <script src="/static/js/bar.js"></script>
        <script src="/static/js/dataTable.js"></script>

</body>

</html>